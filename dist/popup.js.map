{"version":3,"file":"popup.js","mappings":"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","sources":["file:///Users/miezan/Desktop/Dev/Bookmark2/src/popup/components/store/index.js","file:///Users/miezan/Desktop/Dev/Bookmark2/src/popup/index.js","file:///Users/miezan/Desktop/Dev/Bookmark2/src/popup/utils.js","file:///Users/miezan/Desktop/Dev/Bookmark2/src/shared/eventBus.js","file:///Users/miezan/Desktop/Dev/Bookmark2/src/shared/eventHandlers.js","file:///Users/miezan/Desktop/Dev/Bookmark2/src/shared/events.js","file:///Users/miezan/Desktop/Dev/Bookmark2/src/popup/popup.js","file:///Users/miezan/Desktop/Dev/Bookmark2/src/popup/App.svelte","file:///Users/miezan/Desktop/Dev/Bookmark2/src/popup/components/fileSystem/SplitPanel.svelte","file:///Users/miezan/Desktop/Dev/Bookmark2/src/popup/components/fileSystem/Toolbar.svelte","file:///Users/miezan/Desktop/Dev/Bookmark2/src/popup/components/fileSystem/TreeView.svelte","file:///Users/miezan/Desktop/Dev/Bookmark2/webpack/bootstrap","file:///Users/miezan/Desktop/Dev/Bookmark2/webpack/runtime/chunk loaded","file:///Users/miezan/Desktop/Dev/Bookmark2/webpack/runtime/define property getters","file:///Users/miezan/Desktop/Dev/Bookmark2/webpack/runtime/global","file:///Users/miezan/Desktop/Dev/Bookmark2/webpack/runtime/harmony module decorator","file:///Users/miezan/Desktop/Dev/Bookmark2/webpack/runtime/hasOwnProperty shorthand","file:///Users/miezan/Desktop/Dev/Bookmark2/webpack/runtime/jsonp chunk loading","file:///Users/miezan/Desktop/Dev/Bookmark2/webpack/before-startup","file:///Users/miezan/Desktop/Dev/Bookmark2/webpack/startup","file:///Users/miezan/Desktop/Dev/Bookmark2/webpack/after-startup"],"sourcesContent":["import { writable, derived, get } from 'svelte/store';\nimport { displayTree } from '../../utils';\n\nexport const refresh_ui = writable(true)\n\n// export const leftTreeStore = writable(null)\n// export const rightTreeStore = writable(null)\nexport const loadedTrees = writable(0)\nexport const Trees = writable([])\nexport const Forest = writable([])\nexport const bookmarksLoaded = writable(false)\nexport const isSyncingTrees = writable(false)\nexport const source = writable([])\nexport const source2 = writable(\n  [\n    {\n        \"children\": [\n            {\n                \"children\": [],\n                \"dateAdded\": 1690465904942,\n                \"id\": \"1\",\n                \"index\": 0,\n                \"parentId\": \"0\",\n                \"title\": \"Bookmarks Bar\"\n            },\n            {\n                \"children\": [],\n                \"dateAdded\": 1690465904942,\n                \"id\": \"2\",\n                \"index\": 1,\n                \"parentId\": \"0\",\n                \"title\": \"Other Bookmarks\"\n            }\n        ],\n        \"expanded\": true,\n        \"dateAdded\": 1690465904942,\n        \"id\": \"0\",\n        \"title\": \"\"\n    }\n]);\n\n// export const stack = writable([])\n\nglobalThis.get = get\nfunction createEmptyStack(limit=10) {\n    // const { subscribe, set, update }  = writable([]);\n    const _stack = writable([]);\n    const { subscribe, set, update } = _stack\n\n\treturn {\n\t\tsubscribe,\n        set,\n        update,\n        push: (state_obj) => update(_stack => {\n            // [s0, s1, s2...]\n            _stack.push(structuredClone(state_obj))\n            console.log(\"Pushed on top\")\n            if (_stack.length > 10){\n                // remove the oldest element\n                _stack.shift()\n\n                console.log(\"removing > 10\")\n            }\n            return _stack\n        }),\n        /**\n         * remove the latest element from the stack\n         * @returns the last inserted element\n         */\n\t\tpop: () => {\n            const bottomObj = get(_stack).pop();\n            return bottomObj\n        },\n        peek: ()=> get(stack),\n        find: ()=>{},\n\n        printAll:(cb=(n)=>`${n.title} ${n?.children?.length||''}`)=>{\n             // [s0, s1, s2...] from oldest to youngest\n            const myStack = get(stack)\n            myStack.map((state, idx) => {\n                const [treeRoot] = state\n                console.groupCollapsed(\"Tree #\", idx)\n                console.info(displayTree(treeRoot, cb))\n                console.groupEnd()\n            })\n        },\n        print: (idx, expanded=false, cb=(n)=>n.title)=>{\n            const myStack = get(stack)\n            idx = idx && (0 < idx)&& (idx < myStack.length) ? idx: myStack.length - 1\n            const state = myStack[idx]\n            const [treeRoot] = state\n\n            expanded? console.group(\"Tree #\", idx) : console.groupCollapsed(\"Tree #\", idx)\n            console.info(displayTree(treeRoot, cb))\n            console.groupEnd()\n\n        },\n        updateButKeepExpanded: ()=> {\n\n        },\n\n\t\treset: () => set([])\n\t\t// three: () => update((n) => {\n\t\t// \tn = n+1\n\t\t// \treturn n\n\t\t// })\n\t};\n}\n\nexport const stack = createEmptyStack();","import App from './App.svelte';\n\nconst app = new App({\n\ttarget: document.body,\n\tprops: {\n\t\tname: 'Bookmark 2'\n\t}\n});\n\nexport default app;\n","const get_bm_node_parent = (tree, node) =>{\n    (node.parentId)\n}\n\nconst addParentToEachNode = (node, parent=null)=>{\n    node.parent = parent\n    if (node.children) {\n        // console.log(node, node.children)\n        const _parent = node\n        node.children.forEach(n => {\n            return addParentToEachNode(n, _parent)\n        });\n    }\n    return node\n}\n\nconst flat_node_map = (node)=>{\n\n    let children = node.children? node.children.map(cn => flat_node_map(cn)): []\n    // console.log(node.id, node, {children})\n    let res = {\n        // ...Object.assign({}, ...children.map(o => ({[o.key]: o.value}))),\n        ...Object.assign({}, ...children),\n        [node.id]:node,\n    }\n    return res\n}\nglobalThis.flat_node_map = flat_node_map\n\nconst myDynamicSymbolIterator = function*(){\n    const cl = this.children;\n    if (cl) {\n        for (let i = 0, l = cl.length; i < l; i++) {\n            const n = cl[i];\n            if (!n[Symbol.iterator]){\n                n[Symbol.iterator] = myDynamicSymbolIterator\n            }\n            yield n;\n            if (n.children) {\n                yield* n;\n            }\n        }\n    }\n}\n\nfunction *format_iter(_this, name_cb, connectors, fm) {\n    connectors !== null && connectors !== void 0 ? connectors : (connectors = [\"    \", \" |  \", \" ╰─ \", \" ├─ \"]);\n    name_cb !== null && name_cb !== void 0 ? name_cb : (name_cb = (node) => \"\" + node);\n    function _is_last(node) {\n        const ca = node.parent.children;\n        return node === ca[ca.length - 1];\n    }\n    const _format_line = (node) => {\n        // https://www.measurethat.net/Benchmarks/Show/12196/0/arr-unshift-vs-push-reverse-small-array\n        const parts = [name_cb(node)];\n        parts.unshift(connectors[_is_last(node) ? 2 : 3]);\n        let p = node.parent;\n        while (p && p.id !== \"0\") {\n            // `this` is the top node\n            parts.unshift(connectors[_is_last(p) ? 0 : 1]);\n            p = p.parent;\n        }\n        return parts.join(\"\");\n    };\n    yield name_cb(_this);\n    _this[Symbol.iterator] = myDynamicSymbolIterator\n    for (let node of _this) {\n        yield _format_line(node);\n    }\n}\n\n\nexport function displayTree(_this, name_cb, connectors) {\n    _this = addParentToEachNode(_this, _this)\n    const fm = flat_node_map(_this)\n\n    const a = [];\n    for (let line of format_iter(_this, name_cb, connectors, fm)) {\n        a.push(line);\n    }\n    return a.join(\"\\n\");\n}\n\n// https://stackoverflow.com/a/61410824/623546\nexport const styleToString = (style) => {\n    return Object.keys(style).reduce((acc, key) => (\n        acc + key.split(/(?=[A-Z])/).join('-').toLowerCase() + ':' + style[key] + ';'\n    ), '');\n};\n\n\n\n// function makeIndent(indentLength) {\n//     return \".\".repeat(indentLength);\n//   }\n\n//   function logItems(bookmarkItem, indent) {\n//     if (bookmarkItem.url) {\n//       console.log(makeIndent(indent) + bookmarkItem.url);\n//     } else {\n//       console.log(`${makeIndent(indent)}Folder`);\n//       indent++;\n//     }\n//     if (bookmarkItem.children) {\n//       for (const child of bookmarkItem.children) {\n//         logItems(child, indent);\n//       }\n//     }\n//     indent--;\n//   }\n\n//   function logTree(bookmarkItems) {\n//     logItems(bookmarkItems[0], 0);\n//   }\n\n//   function onRejected(error) {\n//     console.log(`An error: ${error}`);\n//   }\n\n//   let gettingTree = browser.bookmarks.getTree();\n//   gettingTree.then(logTree, onRejected);","import { EventEnum } from \"./eventHandlers\";\n\nexport class EventBus {\n    constructor() {\n      this.events = {};\n      this.eventLog = [];\n      this.subscribers = {};\n    }\n\n    _subscribe(eventName, callback) {\n      if (!this.events[eventName]) {\n        this.events[eventName] = [];\n      }\n      this.events[eventName].push(callback);\n    }\n\n    // note - symbols are private and wont show up in Object.keys/entries or even in JSON.stringify\n    // Object.getOwnPropertySymbols(this.subscribers[listener])\n    // sym.map(s=> reversed[s])\n    // this.subscribers[listener][sym[0]]\n    // this.subscribers[listener][sym[0]]\n\n    subscribe(topic, listener, cb){\n      // console.log(topic, listener)\n      this.subscribers[listener] = {...(this.subscribers[listener] || []), ...{[topic]: cb}};\n      let reversed = Object.fromEntries(Object.entries(EventEnum).map(([key, value]) => [value, key]))\n      console.log(`listener (${listener}) is subscribed to topics:`,this.subscribers[listener])\n      console.log(`listener (${listener}) is subscribed to topics:`,Object.getOwnPropertySymbols(this.subscribers[listener]).map(s=> reversed[s]))\n      if (!this.events[topic]) {\n        this.events[topic] = [];\n      }\n      this.events[topic] = {...(this.events[topic] || []), ...{[listener]: cb}};\n    }\n\n    subscribeToAll(callback) {\n      for (const eventName in this.events) {\n        this.subscribe(eventName, callback);\n      }\n    }\n\n    _publish(eventName, data, src) {\n      if (!this.events[eventName]) return;\n\n      this.eventLog.push({ eventName, data });\n      this.events[eventName].filter().forEach((callback) => callback(data));\n    }\n\n    publish(eventName, data, srcName, srcOjb) {\n      if (!this.events[eventName]) return;\n\n      this.eventLog.push({ eventName, data, srcName});\n      Object.entries(this.events[eventName]).map(([listener, callback]) => {\n        console.log(listener, srcName, listener == srcName)\n        if (listener!= srcName){\n          callback(srcOjb, data)\n        }\n      });\n    }\n\n    _emit(eventName, data,  srcName, srcOjb){\n      console.log(`EVENT::${String(eventName)}`, data)\n      return this.publish(eventName, data, srcName, srcOjb)\n    }\n\n    emit({ event, source }){\n      this._emit(event, {}, source?.tree?.id, source)\n    }\n\n    replayEvents(componentName) {\n      const componentEvents = this.eventLog.filter((event) => event.component === componentName);\n      componentEvents.forEach(({ eventName, data }) => {\n        this.events[eventName].forEach((callback) => callback(data));\n      });\n    }\n\n    squashEventsToState(componentName) {\n        const componentEvents = this.eventLog.filter((event) => event.component === componentName);\n\n        // Initialize an empty state\n        let currentState = {};\n\n        // Process each event and apply its effect on the current state\n        componentEvents.forEach(({ eventName, data }) => {\n          switch (eventName) {\n            case 'updateData':\n              currentState = { ...currentState, ...data }; // Merge the data with the current state\n              break;\n            case 'removeData':\n              const newData = { ...currentState };\n              delete newData[data]; // Remove data from the current state\n              currentState = newData;\n              break;\n            // Add more cases for other event types as needed\n          }\n        });\n\n        return currentState;\n      }\n  }\n\nexport class EventBusTool {\n    static _eventBus = null;\n\n    constructor() { }\n\n    static getEventBus() {\n      // first initialization\n      if (this._eventBus == null) {\n        console.log(\"event but init\")\n        this._eventBus = new EventBus();\n      }\n      return this._eventBus;\n    }\n  }\n\nexport const eventBus = EventBusTool.getEventBus();\nconsole.log({eventBus })\n\nexport default eventBus\n","// import {eventBus} from \"./eventBus\"\n\nimport { EventEnumReversed } from \"./events\"\n\n\nconst STATUS_ENUM = Object.freeze({\n    COMPLETED: 'COMPLETED'\n})\nexport const EventEnum = Object.freeze({\n    TreeViewLoaded: Symbol(crypto.randomUUID()),\n    TreeViewUpdated: Symbol(crypto.randomUUID()),\n    BookmarkUpdated: Symbol(crypto.randomUUID()),\n    TreeNodeSelected: Symbol(crypto.randomUUID()),\n    Refresh: Symbol(crypto.randomUUID()),\n    // helpModeBtn: Symbol(crypto.randomUUID()),\n  })\n\nconst find_clone = (source, target) => {\n    for (let x of target.keyMap.entries()){\n        // console.log(x[1].data, source.data, Object.is(x[1].data, source.data), JSON.stringify(x[1].data) == JSON.stringify(source.data))\n        if (JSON.stringify(x[1].data) == JSON.stringify(source.data)){\n            return x[1]\n        }\n    }\n}\n\nexport const eventEnumHandlers = {\n    [EventEnum.TreeViewLoaded]: (event, src, dest)=>{\n        console.log(`Rcvd::TreeViewLoaded - ${src}>>>${dest}`, event)\n        return {\n            status: STATUS_ENUM.COMPLETED\n        }\n    },\n    [EventEnum.TreeViewUpdated]: (event, src, dest)=>{\n        console.log(`Rcvd::TreeViewUpdated - ${src}>>>${dest}`, event)\n    },\n    [EventEnum.BookmarkUpdated]: (event, src, dest)=>{\n        console.log(`Rcvd::BookmarkUpdated - ${src}>>>${dest}`, event)\n    },\n    [EventEnum.Refresh]: (event, src, dest)=>{\n        console.log(`Rcvd::Refresh - ${src}>>>${dest}`, event)\n    },\n    [EventEnum.TreeNodeSelected]: async ({event, source, target, data})=>{\n        console.log(`Rcvd::TreeNodeSelected - ${source}>>>${target?.key}`, event, data)\n        // await target.keyMap.get(source.key).setExpanded(source.expanded)\n        // await target.setExpanded(source.expanded)\n\n        const targetNode = find_clone(source, target)\n        targetNode.setExpanded(source.expanded)\n\n        return {\n            source:source,\n            target:target,\n            action: EventEnumReversed[EventEnum.TreeNodeSelected],\n            status: STATUS_ENUM.COMPLETED,\n        }\n    },\n  }\n\n//   for (const event_name in EventEnum) {\n//     // eventBus.subscribe(EventEnum[event_name], eventEnumHandlers[EventEnum[event_name]])\n//     eventBus.subscribe(EventEnum[event_name], fnWrap(event_name, eventEnumHandlers[EventEnum[event_name]]))\n//   }\n\n\nlet isBusy = false\n  // kinda like a decorator - wrap around a fn and adds some extra juiciness to it!\nexport const fnWrap = function fnWrap(event_name, fn, fnargs=[], plugOpts={}) {\n    return async () => {\n        try {\n            console.time(`${event_name} fn ${fnargs}`);\n\n            let fn_res\n\n            if (!isBusy){\n                isBusy=true\n\n\n                // dangerous stuff should be protected from mishaps ... always use protection\n                try {\n                    fn_res = await fn(...fnargs)\n                    console.log({fn_res})\n                } catch (error) {\n                    fn_res = Promise.reject(error)\n                }\n                // TODO: You are falling asleep ma dude, go to bed and when you wake up clean this crap here\n\n                console.log(`%c${event_name} Completed`, 'color: green;');\n                isBusy=false\n            } else {\n                fn_res = Promise.reject(`DeBouncing... [${event_name}]`)\n            }\n\n            console.timeEnd(`${event_name} fn ${fnargs}`);\n            return fn_res\n        } catch (error) {\n            console.error(error)\n        }\n    }\n}\n","import eventBus, { EventBusTool } from \"./eventBus\";\nimport { EventEnum, eventEnumHandlers } from \"./eventHandlers\";\n\nconst EventEnumReversed = Object.fromEntries(Object.entries(EventEnum).map(([key, value]) => [value, key]))\n\nexport {\n    eventBus,\n    eventEnumHandlers,\n    EventBusTool,\n    EventEnum,\n    EventEnumReversed\n}","\n// https://developer.chrome.com/docs/extensions/reference/bookmarks/#event-onChanged\n\nimport { EventEnum, eventBus } from \"../shared/events\"\nimport { refresh_ui, stack } from \"./components/store\"\n\n/**\n * move a set a bookmark one at a time to their new parent location\n * their position in the array of bookmark will be used at index\n * */\nexport const moveAllBookmark = async (bookmarkIds, parentId) =>{\n    // await chrome.bookmarks.move(\"1075\", {index: 0, parentId: '1'})\n    const moves = bookmarkIds.map(async (bmId, idx)=>{\n        try {\n            return await chrome.bookmarks.move(bmId, {index: idx, parentId: parentId})\n        } catch (error) {\n            console.log(`Error moving bookmark ${bmId}`, error)\n        }\n    })\n\n    return Promise.all(moves)\n}\n\nexport async function getBookmarks() {\n    const res = await chrome.bookmarks.getTree();\n    console.log({res})\n    res[0].expanded=true\n    stack.push(res)\n    globalThis.stack = stack\n    return res\n}\n\nexport async function filterFolders(bookmarkTree) {\n    function __filterFolder(node) {\n      if (!node.children || node.children.length === 0) {\n        return null; // Return null for nodes with no children\n      }\n      const folderObject = {\n        title: node.title||\"\",\n        id: node.id,\n        parentId: node.parentId||\"\",\n        children: []\n      };\n\n      for (const childNode of node.children) {\n        const childFolder = _filterFolder(childNode);\n        if (childFolder) {\n          folderObject.children.push(childFolder);\n        }\n      }\n      return folderObject;\n    }\n\n    function _filterFolder(node) {\n        if (!node.children || node.children.length === 0) {\n            return null; // Remove the node without children\n        }\n\n        const modifiedChildren = node.children\n            .map(childNode => _filterFolder(childNode))\n            .filter(childNode => childNode !== null);\n\n        return { ...node, children: modifiedChildren };\n      }\n\n    const [rootBookmarkNode] = bookmarkTree|| await chrome.bookmarks.getTree();\n    let folders = _filterFolder(rootBookmarkNode);\n    console.log(\"ROOt = \", [folders])\n    return [folders]\n}\n\nexport const addParentToEachNode = (node, parent=null)=>{\n    node.parent = parent\n    if (node.children) {\n        const _parent = node\n        node.children.forEach(n => {\n            return addParentToEachNode(n, _parent)\n        });\n    }\n    return node\n}\n\nconst refreshBookmarksUI = ()=>{\n    // refresh_ui.update((n) => n+1)\n    getBookmarks()\n    console.log('refreshing bookmarks UI')\n}\nglobalThis.refreshBookmarksUI = refreshBookmarksUI\nglobalThis.refresh_ui = refresh_ui\n\nconst saveToBookmarks = () => {\n    console.log('saving bookmarks')\n}\n\n\nchrome.bookmarks.onChanged.addListener(()=>{console.log(\"bookmarks.onChanged triggered\"); refreshBookmarksUI()})\nchrome.bookmarks.onChildrenReordered.addListener(()=>{console.log(\"bookmarks.onChildrenReordered triggered\"); refreshBookmarksUI()})\nchrome.bookmarks.onCreated.addListener(()=>{console.log(\"bookmarks.onCreated triggered\"); refreshBookmarksUI()})\n// chrome.bookmarks.onImportBegan.addListener(()=>{console.log(\"bookmarks.onImportBegan triggered\"); refreshBookmarksUI()})\n// chrome.bookmarks.onImportEnded.addListener(()=>{console.log(\"bookmarks.onImportEnded triggered\"); refreshBookmarksUI()})\nchrome.bookmarks.onMoved.addListener(()=>{console.log(\"bookmarks.onMoved triggered\"); refreshBookmarksUI()})\nchrome.bookmarks.onRemoved.addListener(()=>{console.log(\"bookmarks.onRemoved triggered\"); refreshBookmarksUI()})\nconst me = \"popup\"\nconsole.log(\"ME = \", me, EventEnum)\nconst ignored_events = [EventEnum.TreeNodeSelected]\nfor (const event_name in EventEnum) {\n// eventBus.subscribe(EventEnum[event_name], fnWrap(event_name, eventEnumHandlers[EventEnum[event_name]], [me]))\n    if (!ignored_events.includes(EventEnum[event_name])){\n        eventBus.subscribe(EventEnum[event_name], \"popup\", (src, data)=>{console.log(`EVENT-[${event_name}] SENT FROM [${src}] TO [${me}] `, data)} )\n    }\n}\n","<script>\n  import \"./components/globals/Theme.svelte\";\n  // import \"./popup\"\n\n  import { onMount } from \"svelte\";\n  import { sha256 } from 'crypto-hash';\n  import { themeChange } from \"theme-change\";\n  import SplitPanel from \"./components/fileSystem/SplitPanel.svelte\";\n  // import LogOverlay from './components/fileSystem/LogOverlay.svelte';\n  import TreeView from \"./components/fileSystem/TreeView.svelte\";\n  // import Toolbar from \"./components/fileSystem/Toolbar.svelte\";\n  import Icon from \"@iconify/svelte\";\n  import moonFilledAltLoop from \"@iconify/icons-line-md/moon-filled-alt-loop\";\n  import moonAltToSunnyOutlineLoopTransition from \"@iconify/icons-line-md/moon-alt-to-sunny-outline-loop-transition\";\n  import {\n    leftTreeStore,\n    loadedTrees,\n    rightTreeStore,\n    source,\n    bookmarksLoaded,\n\n    refresh_ui,\n\n    stack\n\n\n  } from \"./components/store\";\n  import { filterFolders, getBookmarks } from \"./popup\";\n  import { Wunderbaum } from \"wunderbaum/dist/wunderbaum.esm\";\n  import eventBus from \"../shared/eventBus\";\n  import { EventEnum } from \"../shared/eventHandlers\";\n\n  //   import svelteTreeView from 'https://cdn.skypack.dev/svelte-tree-view';\n\n  export let name;\n  let isDarkMode;\n  let themeSwitch = false;\n  let bmarks;\n  // NOTE: the element that is using one of the theme attributes must be in the DOM on mount\n  onMount(async () => {\n    // window.localStorage = chrome.storage.local\n    themeChange(true);\n    // refresh_ui.set(true)\n    // bmarks = await chrome.bookmarks.getTree();\n    // console.log({ bmarks });\n\n    // source.set(bmarks)\n    // 👆 false parameter is required for svelte\n  });\n\n  let refresh;\n  refresh_ui.subscribe((val) => {\n    refresh = val;\n    console.log(`UI refreshing...`, refresh);\n  });\n  // import SplitPanel from \"./SplitPanel.svelte\";\n\n//   let treeSource;\n//   source.subscribe((val) => {\n//     treeSource = val;\n//     console.log(`Source Updated!`, treeSource);\n//   });\n  let expanded = {\n\n  }\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    console.log(\"DOMContentLoaded! App\");\n    Wunderbaum?.util.onEvent(document, \"click\", \".wb-row\", (e)=>{\n      const info = Wunderbaum.getEventInfo(e);\n      const node = info.node;\n      console.log({e}, info.node.tree.id)\n      if (node.isExpandable()){\n        console.log('Clicked on Folder')\n\n        eventBus.emit({event: EventEnum.TreeNodeSelected, source: node})\n\n        // eventBus.emit(\n        //   EventEnum.TreeNodeSelected,\n        //   {src:node.tree, node_id: node.key, source_node: node},\n        //   node.tree.id\n        // )\n\n        // there will be collisions if the folder names are the same...\n        // const hash = await sha256(`${node.title}${node.data.id}`)\n        const totally_not_a_hash = `${node.title}${node.data.id}`\n        expanded[totally_not_a_hash] = node.expanded\n        console.log({expanded, node})\n      }\n    })\n  });\n\n\n//   async function getBookmarks() {\n//     const res = await chrome.bookmarks.getTree();\n//     console.log({res})\n//     res[0].expanded=true\n//     stack.push(res)\n//     globalThis.stack = stack\n//     return res\n// }\n\n</script>\n\n<style>\n\n</style>\n\n<!-- <div class=\"nav bg-black\"> Bm2</div> -->\n\n<nav class=\"flex row mb-5 justify-between\">\n  <h3>{name} - {\"{\"} Live Mode {\"}\"}</h3>\n  <button\n    on:click={() => {\n      console.log(themeSwitch.click(), isDarkMode);\n    }}\n    class=\"p-1\"\n  >\n    <input\n      type=\"checkbox\"\n      hidden\n      data-toggle-theme=\"dark,light\"\n      data-act-class=\"ACTIVECLASS\"\n      bind:checked={isDarkMode}\n      bind:this={themeSwitch}\n    />\n    <Icon\n      icon={isDarkMode\n        ? moonAltToSunnyOutlineLoopTransition\n        : moonFilledAltLoop}\n    />\n  </button>\n</nav>\n\n<!-- <div class=\"panels bg-black\"> -->\n    {#await getBookmarks() then data }\n    <SplitPanel leftPanelWidth=\"30%\" rightPanelWidth=\"50%\">\n      <div slot=\"left\">\n        {#await  filterFolders(data) then filteredData}\n          <TreeView\n              treeSource={filteredData}\n              rootID=\"leftTree\"\n              treeDOM=\"leftTreeDOM\"\n              parentDOM=\"leftParentDOM\"\n          />\n        {/await}\n    </div>\n    <div class=\"bg-black\" slot=\"right\">\n      <TreeView\n              treeSource={structuredClone(data)}\n              rootID=\"rightTree\"\n              treeDOM=\"rightTreeDOM\"\n              parentDOM=\"rightParentDOM\"\n        />\n      </div>\n  </SplitPanel>\n  {/await}\n\n<!-- </div> -->\n\n<!-- <div class=\"main-content\">\n<nav class=\"flex row mb-5 justify-between\">\n  <h3>{name} - {\"{\"} Live Mode {\"}\"}</h3>\n  <button\n    on:click={() => {\n      console.log(themeSwitch.click(), isDarkMode);\n    }}\n    class=\"p-1\"\n  >\n    <input\n      type=\"checkbox\"\n      hidden\n      data-toggle-theme=\"dark,light\"\n      data-act-class=\"ACTIVECLASS\"\n      bind:checked={isDarkMode}\n      bind:this={themeSwitch}\n    />\n    <Icon\n      icon={isDarkMode\n        ? moonAltToSunnyOutlineLoopTransition\n        : moonFilledAltLoop}\n    />\n  </button>\n</nav>\n\n{#key refresh}\n  {#await getBookmarks() then data }\n    <SplitPanel leftPanelWidth=\"20%\" rightPanelWidth=\"50%\">\n      <div slot=\"left\">\n          <TreeView\n              treeSource={data}\n              rootID=\"leftTree\"\n              treeDOM=\"leftTreeDOM\"\n              parentDOM=\"leftParentDOM\"\n              thisTree={leftTreeStore}\n              otherTree={rightTreeStore}\n          />\n    </div>\n    <div class=\"bg-black\" slot=\"right\">\n      <TreeView\n              treeSource={structuredClone(data)}\n              rootID=\"rightTree\"\n              treeDOM=\"rightTreeDOM\"\n              parentDOM=\"rightParentDOM\"\n        />\n      </div>\n  </SplitPanel>\n  {/await}\n{/key}\n</div> -->\n","<script>\n  import Toolbar from \"./Toolbar.svelte\";\n  export let leftPanelWidth = \"30%\";\n\n  let isResizing = false;\n  let startLeftPanelWidth = 0;\n\n  function handleMouseDown(event) {\n    isResizing = true;\n    startLeftPanelWidth = event.clientX;;\n  }\n\n  function handleMouseMove(event) {\n    if (isResizing) {\n      const newLeftPanelWidth = event.clientX;\n      leftPanelWidth = `${newLeftPanelWidth}px`;\n    }\n  }\n\n  function handleMouseUp(event) {\n    isResizing = false;\n  }\n</script>\n\n<div class=\"split-panel\" on:mousemove={handleMouseMove} on:mouseup={handleMouseUp}>\n  <div class=\"split-panel-left\" style=\"width: {leftPanelWidth}\">\n    <slot name=\"left\"></slot>\n  </div>\n  <div class=\"split-panel-resize-handle\" on:mousedown={handleMouseDown}></div>\n  <div class=\"split-panel-right\">\n    <Toolbar/>\n      <slot name=\"right\"></slot>\n  </div>\n</div>\n\n<style global lang=\"postcss\">\n\n\n.split-panel-right :global(div)::-webkit-scrollbar,\n.split-panel-left :global(div) ::-webkit-scrollbar {\n    display: none;  /* Safari and Chrome */\n}\n/* Optional: show position indicator in red */\n.split-panel-left::-webkit-scrollbar-thumb {\n    background: #FF0000;\n}\n\n/* hack to targetdiv.. remove it later... */\n.split-panel-left :global(div),\n.split-panel-right :global(div[slot='right']) {\n  display: block;\n  margin: 0 1px;\n  border-radius: 5px;\n  background-color: var(--base-100);\n  height: 100%;\n  scroll-behavior: smooth;\n  overflow: scroll;\n  /* margin-bottom: 1.58em; */\n  /* padding-bottom: 3em; */\n  /* border: 2px solid var(--wb-border-color); */\n}\n\n.split-panel-left :global(div)::-webkit-scrollbar,\n.split-panel-right :global(div[slot='right'])::-webkit-scrollbar{\n  display: none;\n}\n\n  .split-panel {\n    display: flex;\n    height: 100%;\n    width: 100%;\n    /* flex: 1; */\n    /* border: 2px solid var(--wb-border-color); */\n    /* border-radius: 5px; */\n  }\n\n  .split-panel-left,\n  .split-panel-right {\n    height: auto;\n    overflow-y: hidden;\n    overflow-x: hidden;\n    scroll-behavior: smooth;\n    -ms-overflow-style: none;  /* Internet Explorer 10+ */\n    scrollbar-width: none;  /* Firefox */\n    /* padding-bottom: 2.88em; */\n  }\n\n  .split-panel-left {\n    display: block;\n    min-width: 50px;\n    width: 30%;\n    padding-bottom: 2.95em;\n  }\n\n  .split-panel-right {\n    flex: 1;\n    display: block;\n    min-width: 50px;\n    border-radius: 6.5px;\n    /* padding-bottom: 2.88em; */\n    padding-bottom: 5.2em;\n  }\n\n  .split-panel-resize-handle {\n    width: 2px;\n    border-radius: 0.7px;\n    top: 6px;\n    cursor: ew-resize;\n    z-index: 9999;\n    background: transparent;\n    /* background: var(--primary-color); */\n    /* background: hsl(0deg 0% 96% / 0%);  */\n    position: relative;\n    /* height: calc(80vh - 6px); */\n  }\n\n\n</style>\n","<div class=\"text-sm breadcrumbs\">\n  <ul>\n    <li>\n      <!-- svelte-ignore a11y-missing-attribute -->\n      <a >\n        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" class=\"w-4 h-4 mr-2 stroke-current\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z\"></path></svg>\n        Home\n      </a>\n    </li>\n    <li>\n      <!-- svelte-ignore a11y-missing-attribute -->\n      <a>\n        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" class=\"w-4 h-4 mr-2 stroke-current\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z\"></path></svg>\n        Documents\n      </a>\n    </li>\n    <li>\n      <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" class=\"w-4 h-4 mr-2 stroke-current\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"></path></svg>\n      Add Document\n    </li>\n  </ul>\n</div>","<svelte:head>\n  <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.0/font/bootstrap-icons.css\" />\n  <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/gh/mar10/wunderbaum@main/dist/wunderbaum.css\" />\n</svelte:head>\n<script context=\"module\">\n\t// retain module scoped expansion state for each tree node\n\tconst _expansionState = {\n\t\t/* treeNodeId: expanded <boolean> */\n\t}\n</script>\n<script>\n  import { onMount } from 'svelte'\n  // import { Wunderbaum } from \"wunderbaum/dist/wunderbaum.esm.min\";\n  import { Wunderbaum } from \"wunderbaum\";\n  import { loadedTrees, source, Forest } from '../store/index'\n  import { styleToString } from '../../utils'\n  // import EventBusTool, {event_bus} from '@shared/event_bus'\n  import { EventBusTool, eventBus } from '../../../shared/eventBus.js'\n  import { EventEnum, fnWrap, eventEnumHandlers } from '../../../shared/eventHandlers'\n\n  export let treeDOM='treeDOM_ID_1';\n  export let parentDOM='parentDOM_ID_1';\n  export let rootID;\n  export let treeSource;\n  let me = rootID\n  let tree;\n\n  // console.log(\"loading treeview...\", rootID, treeSource)\n\n  // globalThis.eventBus = eventBus\n  // globalThis.EventEnum = EventEnum\n\n  const handleAllEvents = (data=>{\n    console.log(\"handleAllEvents\", data, me)\n    if (data.event.src !== me){\n      console.log(`${treeDOM} received LOADED event:`, event)\n    }\n  })\n\n  // eventBus.subscribeToAll(handleAllEvents)\n  eventBus.emit(EventEnum.TreeViewLoaded, {src: treeDOM}, me)\n\n\tconst addTreeToForest = (newTree) => {\n\t\t$Forest = [...$Forest, newTree];\n    console.log($Forest)\n\t};\n  function faviconURL(u) {\n    const url = new URL(chrome.runtime.getURL(\"/_favicon/\"));\n    url.searchParams.set(\"pageUrl\", u);\n    url.searchParams.set(\"size\", \"64\");\n    return url.toString();\n  }\n\n  // const event_bus = EventBusTool.getEventBus();\n\n  let showUrl = true\n  // _expansionState[label] = !expanded;\n  // https://mar10.github.io/wunderbaum/index.html#/tutorial/tutorial_events?id=common-event-handlers\n  const init_tree = () => {\n\n    const DOM = document.getElementById(treeDOM)\n    console.log(DOM)\n    // if (DOM){\n      // DOM.innerHTML=''\n      const _tree = new Wunderbaum({\n        id: rootID,\n        element: document.getElementById(treeDOM),\n        debugLevel: 5,\n        // connectTopBreadcrumb: document.getElementById(parentDOM),\n        source: treeSource,\n\n        // header: \"Bookmark\",\n        // headerHeightPx: ROW_HEIGHT,\n        // rowHeightPx: ROW_HEIGHT,\n        columns: null,\n        types: null,\n        // escapeTitles: true,\n        enabled: true,\n        fixedCol: false,\n        showSpinner: false,\n        checkbox: false,\n        // minExpandLevel: 3,\n        emptyChildListExpandable: false,\n        updateThrottleWait: 100,\n        skeleton: false,\n        connectTopBreadcrumb: null,\n        // --- KeyNav ---\n        navigationModeOption: null,\n        quicksearch: true,\n        // --- Events ---\n        // change: noop,\n        enhanceTitle: (e)=>{\n          if(showUrl){\n            e.node.setTitle(e.node.data.url || e.node.title)\n          }\n          // console.log(\"updating... enhanceTitle\", {e})\n        },\n        icon: (e) => {\n          if (e.node?.data?.url){\n            const _style = {\n              marginRight: \"8px\",\n              backgroundImage: `url(${ faviconURL(e.node.data.url) })`,\n              backgroundSize: \"cover\",\n            }\n            return `<i class='wb-icon' style=${styleToString(_style)}> </i>`\n          }\n          // Exit without returning a value: continue with default processing.\n        },\n        // error: noop,\n        // receive: noop,\n\n        render: function (e) {\n          const node = e.node;\n          const util = e.util;\n\n          // if (e.node.data?.url){\n          //   const newTitle = `<span class=wb-title><a href=\"${e.node.data.url}\">${e.node.title}</a></span>`\n          //   const titleSpan = e.node\n          //     .getColElem(0)\n          //     .querySelector(\".wb-title\");\n          //   titleSpan.innerHTML = newTitle;\n          // }\n\n        },\n\n        // load: function(e){\n\n        //   console.log({loading: true})\n\n        // },\n        edit: {\n          trigger: [\"clickActive\", \"F2\", \"macEnter\"],\n          select: true,\n          beforeEdit: function (e) {\n            // console.log(e.type, e);\n            // return e.node.type === \"person\";\n          },\n          edit: function (e) {\n            console.log(e.type, e);\n          },\n          apply: function (e) {\n            console.log(e.type, e);\n            // Simulate async storage that also validates:\n            return e.util.setTimeoutPromise(() => {\n              e.inputElem.setCustomValidity(\"\");\n              if (e.newValue.match(/.*\\d.*/)) {\n                e.inputElem.setCustomValidity(\"No numbers please.\");\n                return false;\n              }\n            }, 1000);\n          },\n        },\n        // lazyLoad: (e) => {\n        //   return { url: `https://fakestoreapi.com/products/category/${e.node.refKey}` }\n        // },\n        receive: (e) => {\n          return e.response.map((elem) => {\n            console.log(\"receive\", {elem})\n            return {\n              title: elem.title,\n              children: elem.children,\n              refKey: elem.id,\n            }\n          });\n        },\n\n\n        /** ------- drag and drop --------*/\n        dnd: {\n          dragStart: (e) => {\n            if (e.node.type === \"folder\") {\n              return false;\n            }\n            e.event.dataTransfer.effectAllowed = \"all\";\n            return true;\n          },\n          dragEnter: (e) => {\n            if (e.node.type === \"folder\") {\n              e.event.dataTransfer.dropEffect = \"copy\";\n              return \"over\";\n            }\n            return [\"before\", \"after\"];\n          },\n          drop: (e) => {\n            console.log(\"Drop \" + e.sourceNode + \" => \" + e.region + \" \" + e.node, e);\n            e.sourceNode.moveTo(e.node, e.defaultDropMode)\n          },\n        },\n      });\n      addTreeToForest(_tree)\n      loadedTrees.set($loadedTrees + 1)\n      // globalThis._tree = _tree\n    //  console.info(_tree.format(n=>n.key))\n      tree = _tree\n      return _tree\n    // }\n  }\n\n  onMount(() => {\n    const myTree = init_tree()\n\n    for (const event_name in EventEnum) {\n      // eventBus.subscribe(EventEnum[event_name], me, (src, data)=>{\n      //   console.log(`EVENT-[${event_name}] SENT FROM [${src}] TO [${me}] `, data)\n      //   const destinationNode = myTree\n      //   fnWrap(event_name, eventEnumHandlers[EventEnum[event_name]], [data, src, destinationNode])()\n      // })\n      eventBus.subscribe(EventEnum[event_name], me, (src, data)=>{\n        console.log(`EVENT-[${event_name}] SENT FROM [${src}] TO [${me}] `, data)\n        const destinationNode = myTree\n        fnWrap(\n          event_name, eventEnumHandlers[EventEnum[event_name]],\n          [{event: event_name, source: src, target: myTree, data: data}]\n        )()\n      })\n    }\n\n\t\t// window.addEventListener('OnMount::DOMContentLoaded')\n\t\t// return () => window.removeEventListener('DOMContentLoaded');\n\t})\n\n\n  globalThis._init_tree = init_tree\n\n</script>\n\n<div>\n\n  <output id={parentDOM} class=\"\"></output>\n  <div id={treeDOM} class=\"\">\n    <!-- class=\"wb-rainbow wb-skeleton wb-initializing wb-alternate wb-checkbox-auto-hide wb-fade-expander\"> -->\n    <h1>Bookmark</h1>\n    <p>Loading&hellip;</p>\n  </div>\n  <!-- </div> -->\n  <!-- {JSON.stringify(treeSource)} -->\n</div>","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = (module) => {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: () => {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"popup.js\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkunbounded_bookmarks\"] = self[\"webpackChunkunbounded_bookmarks\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\n__webpack_require__.O(undefined, [\"vendors.js\"], () => (__webpack_require__(\"./src/shared/events.js\")))\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"vendors.js\"], () => (__webpack_require__(\"./src/popup/index.js\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":["_stack","fnWrap"],"sourceRoot":""}